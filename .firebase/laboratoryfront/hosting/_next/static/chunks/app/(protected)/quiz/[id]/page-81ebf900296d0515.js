(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{1444:function(e,t,n){Promise.resolve().then(n.bind(n,5972))},5972:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n(7437),a=n(2265),r=n(1190),l=n(5922),s=n(6463);function d(e){let{html:t}=e;return(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}function o(e){var t;let{params:n}=e,o=(0,s.useRouter)(),[c,f]=(0,a.useState)([]),[h,m]=(0,a.useState)(0),[p,x]=(0,a.useState)({}),[b,v]=(0,a.useState)({}),[j,g]=(0,a.useState)({});(0,a.useEffect)(()=>f((0,r.n0)()),[]);let y=(0,a.useMemo)(()=>c.find(e=>e.id===n.id),[c,n.id]),N=null==y?void 0:null===(t=y.questions)||void 0===t?void 0:t[h];return y?N?(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-2",children:y.title}),(0,i.jsxs)("p",{className:"mb-4",children:["Pytanie ",h+1," / ",y.questions.length]}),(0,i.jsxs)("div",{className:"border rounded p-4",children:[(0,i.jsx)("h2",{"data-testid":"q-title",className:"text-xl font-semibold mb-2",children:N.title}),(0,i.jsx)("div",{"data-testid":"q-body",className:"mb-4",children:(0,i.jsx)(d,{html:N.bodyHtml})}),(0,i.jsx)(u,{question:N,value:p[N.id],onChange:e=>x(t=>({...t,[N.id]:e})),disabled:!!b[N.id]}),(0,i.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,i.jsx)("button",{"data-testid":"submit",className:"border px-3 py-2",onClick:()=>{let e=function(e,t){var n,i;if(e.type===l.ce.SINGLE){let i=null===(n=e.correctOptionIds)||void 0===n?void 0:n[0];return t&&i&&t===i}if(e.type===l.ce.MULTI){let n=new Set(null!==(i=e.correctOptionIds)&&void 0!==i?i:[]),a=new Set(null!=t?t:[]);if(n.size!==a.size)return!1;for(let e of n)if(!a.has(e))return!1;return!0}if(e.type===l.ce.FILL){let n=e.fill,i=null!=t?t:{};return n.fields.every(e=>i[e.id]===n.correctByFieldId[e.id])}if(e.type===l.ce.MATCH){let n=e.match.pairs,i=null!=t?t:{};return n.every((e,t)=>i[t]===e.right)}return!1}(N,p[N.id]);v(e=>({...e,[N.id]:!0})),g(t=>({...t,[N.id]:e}))},disabled:!!b[N.id],children:"Zatwierdź"}),(0,i.jsx)("button",{"data-testid":"next",className:"border px-3 py-2",onClick:()=>{if(h<y.questions.length-1)m(e=>e+1);else{let e=y.questions.length,t=Object.values(j).filter(Boolean).length;o.push("/quiz/".concat(y.id,"/result?score=").concat(t,"&total=").concat(e))}},disabled:!b[N.id],children:h<y.questions.length-1?"Następne":"Zakończ"})]}),b[N.id]&&(0,i.jsx)("p",{"data-testid":"feedback",className:"mt-3 font-semibold",children:j[N.id]?"✅ Poprawnie":"❌ Błędnie"})]})]}):(0,i.jsx)("p",{children:"Quiz nie ma pytań. Dodaj je w panelu."}):(0,i.jsx)("p",{children:"Nie znaleziono quizu."})}function u(e){let{question:t,value:n,onChange:a,disabled:r}=e;switch(t.type){case l.ce.SINGLE:return(0,i.jsx)(f,{question:t,value:n,onChange:a,disabled:r});case l.ce.MULTI:return(0,i.jsx)(h,{question:t,value:n,onChange:a,disabled:r});case l.ce.FILL:return(0,i.jsx)(m,{question:t,value:n,onChange:a,disabled:r});case l.ce.MATCH:return(0,i.jsx)(p,{question:t,value:n,onChange:a,disabled:r});default:return(0,i.jsx)("p",{children:"Nieznany typ pytania."})}}function c(e){return"image"===e.kind?(0,i.jsx)("img",{src:e.value,alt:"option",className:"max-h-24 border"}):(0,i.jsx)("span",{children:e.value})}function f(e){let{question:t,value:n,onChange:a,disabled:r}=e,l=null!=n?n:"";return(0,i.jsx)("div",{className:"flex flex-col gap-2","data-testid":"single-area",children:t.options.map((e,n)=>(0,i.jsxs)("label",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{"data-testid":"single-".concat(n),type:"radio",name:t.id,checked:l===e.id,disabled:r,onChange:()=>a(e.id)}),c(e)]},e.id))})}function h(e){let{question:t,value:n,onChange:a,disabled:r}=e,l=new Set(null!=n?n:[]),s=e=>{let t=new Set(l);t.has(e)?t.delete(e):t.add(e),a(Array.from(t))};return(0,i.jsx)("div",{className:"flex flex-col gap-2","data-testid":"multi-area",children:t.options.map((e,t)=>(0,i.jsxs)("label",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{"data-testid":"multi-".concat(t),type:"checkbox",checked:l.has(e.id),disabled:r,onChange:()=>s(e.id)}),c(e)]},e.id))})}function m(e){let{question:t,value:n,onChange:a,disabled:r}=e,l=t.fill,s=null!=n?n:{},d=(e,t)=>{a({...s,[e]:t})};return(0,i.jsx)("div",{"data-testid":"fill-area",className:"flex flex-col gap-3",children:l.fields.map((e,t)=>{var n;return(0,i.jsxs)("div",{className:"border rounded p-2",children:[(0,i.jsx)("div",{className:"font-semibold mb-1",children:e.label}),(0,i.jsxs)("select",{"data-testid":"fill-".concat(t),className:"border p-2",value:null!==(n=s[e.id])&&void 0!==n?n:"",disabled:r,onChange:t=>d(e.id,t.target.value),children:[(0,i.jsx)("option",{value:"",children:"-- wybierz --"}),l.options.map((e,t)=>(0,i.jsx)("option",{value:e,children:e},t))]})]},e.id)})})}function p(e){let{question:t,value:n,onChange:a,disabled:r}=e,l=t.match.pairs,s=l.map(e=>e.right),d=null!=n?n:{},o=(e,t)=>{a({...d,[e]:t})};return(0,i.jsx)("div",{"data-testid":"match-area",className:"flex flex-col gap-3",children:l.map((e,t)=>{var n;return(0,i.jsxs)("div",{className:"border rounded p-2",children:[(0,i.jsxs)("div",{className:"font-semibold mb-1",children:["Dopasuj: ",e.left]}),(0,i.jsxs)("select",{"data-testid":"match-".concat(t),className:"border p-2",value:null!==(n=d[t])&&void 0!==n?n:"",disabled:r,onChange:e=>o(t,e.target.value),children:[(0,i.jsx)("option",{value:"",children:"-- wybierz --"}),s.map((e,t)=>(0,i.jsx)("option",{value:e,children:e},t))]})]},t)})})}},5922:function(e,t,n){"use strict";n.d(t,{Aj:function(){return r},Nm:function(){return l},ce:function(){return a}});var i=n(1190);let a={SINGLE:"single",MULTI:"multi",FILL:"fill",MATCH:"match"};function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Nowy quiz";return{id:(0,i.hQ)(),title:e,questions:[],createdAt:Date.now(),updatedAt:Date.now()}}function l(e){let t={id:(0,i.hQ)(),type:e,title:"Nowe pytanie",bodyHtml:"<p>Treść pytania (HTML)</p>",submitLabel:"Zatwierdź"};if(e===a.SINGLE||e===a.MULTI){let e={id:(0,i.hQ)(),kind:"text",value:"Opcja A"},n={id:(0,i.hQ)(),kind:"text",value:"Opcja B"};return{...t,options:[e,n],correctOptionIds:[e.id]}}if(e===a.FILL){let e={id:(0,i.hQ)(),label:"Pole 1"};return{...t,fill:{options:["A","B","C"],fields:[e],correctByFieldId:{[e.id]:"A"}}}}return e===a.MATCH?{...t,match:{pairs:[{left:"1",right:"jeden"},{left:"2",right:"dwa"}]}}:t}},1190:function(e,t,n){"use strict";n.d(t,{GE:function(){return d},IE:function(){return l},Wd:function(){return s},hQ:function(){return a},n0:function(){return r}});let i="laboratoryfront_quizzes_v1";function a(){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"".concat(Date.now(),"_").concat(Math.random().toString(16).slice(2))}function r(){let e=localStorage.getItem(i),t=e?function(e,t){try{return JSON.parse(e)}catch(e){return t}}(e,[]):[];return Array.isArray(t)?t:[]}function l(e){localStorage.setItem(i,JSON.stringify(e||[]))}function s(e){let t=r(),n=t.findIndex(t=>t.id===e.id),i=[...t];return -1===n?i.unshift(e):i[n]=e,l(i),i}function d(e){let t=r().filter(t=>t.id!==e);return l(t),t}},6463:function(e,t,n){"use strict";var i=n(1169);n.o(i,"useParams")&&n.d(t,{useParams:function(){return i.useParams}}),n.o(i,"usePathname")&&n.d(t,{usePathname:function(){return i.usePathname}}),n.o(i,"useRouter")&&n.d(t,{useRouter:function(){return i.useRouter}}),n.o(i,"useSearchParams")&&n.d(t,{useSearchParams:function(){return i.useSearchParams}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=1444)}),_N_E=e.O()}]);