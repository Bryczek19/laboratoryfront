(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{7575:function(e,t,a){Promise.resolve().then(a.bind(a,6455))},6455:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u},dynamic:function(){return o}});var r=a(7437),n=a(2265),s=a(9842),i=a(9317),l=a(7619);let o="force-dynamic";function u(){let{user:e,loading:t}=(0,i.a)(),[a,o]=(0,n.useState)(""),[u,c]=(0,n.useState)(""),[d,p]=(0,n.useState)(""),[f,m]=(0,n.useState)(""),[h,x]=(0,n.useState)("");(0,n.useEffect)(()=>{!t&&(null==e?void 0:e.uid)&&(async()=>{try{let t=(0,s.JU)(l.db,"users",e.uid),a=await (0,s.QT)(t);if(a.exists()){let e=a.data();o(e.street||""),c(e.city||""),p(e.zip||"")}}catch(e){console.error(e),x("Nie udało się pobrać danych z Firestore.")}})()},[t,null==e?void 0:e.uid]);let b=async()=>{if(x(""),m(""),!/^\d{2}-\d{3}$/.test(d)){x("Kod pocztowy musi mieć format 00-000");return}try{let t=(0,s.JU)(l.db,"users",e.uid);await (0,s.pl)(t,{email:e.email,street:a,city:u,zip:d,updatedAt:Date.now()},{merge:!0}),m("Zapisano dane ✔"),setTimeout(()=>m(""),2e3)}catch(e){console.error(e),x("Błąd zapisu danych.")}};return t?(0,r.jsx)("p",{children:"Ładowanie profilu..."}):e?(0,r.jsxs)("div",{className:"max-w-xl",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Profile"}),(0,r.jsxs)("p",{className:"mb-4",children:[(0,r.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("input",{className:"border p-2",placeholder:"Ulica",value:a,onChange:e=>o(e.target.value)}),(0,r.jsx)("input",{className:"border p-2",placeholder:"Miasto",value:u,onChange:e=>c(e.target.value)}),(0,r.jsx)("input",{className:"border p-2",placeholder:"Kod pocztowy (00-000)",value:d,onChange:e=>p(e.target.value)}),(0,r.jsx)("button",{onClick:b,className:"bg-gray-900 text-white px-4 py-2",children:"Zapisz adres"}),f&&(0,r.jsx)("p",{className:"text-green-600",children:f}),h&&(0,r.jsx)("p",{className:"text-red-600",children:h})]})]}):(0,r.jsx)("p",{children:"Nie jesteś zalogowany."})}},9317:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return o},a:function(){return u}});var r=a(7437),n=a(2265),s=a(303),i=a(7619);let l=(0,n.createContext)(null);function o(e){let{children:t}=e,[a,o]=(0,n.useState)(null),[u,c]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=(0,s.Aj)(i.I,e=>{o(e),c(!1)});return()=>e()},[]),(0,r.jsx)(l.Provider,{value:{user:a,loading:u},children:t})}function u(){return(0,n.useContext)(l)}},7619:function(e,t,a){"use strict";a.d(t,{I:function(){return l},db:function(){return o}});var r=a(5236),n=a(303),s=a(9842);let i=(0,r.C6)().length?(0,r.Mq)():(0,r.ZF)({apiKey:"AIzaSyAq6uVpLDKzYHmbnBujbdPTjQBvCN19kzc",authDomain:"laboratoryfront.firebaseapp.com",projectId:"laboratoryfront",storageBucket:"laboratoryfront.firebasestorage.app",messagingSenderId:"721271593414",appId:"1:721271593414:web:53314b862d1aad224f3ac7",measurementId:"G-QMCDBS8YW2"}),l=(0,n.v0)(i),o=(0,s.ad)(i)}},function(e){e.O(0,[609,324,67,971,23,744],function(){return e(e.s=7575)}),_N_E=e.O()}]);