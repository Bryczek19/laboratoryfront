(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[851],{2701:function(e,t,n){Promise.resolve().then(n.bind(n,5090))},5922:function(e,t,n){"use strict";n.d(t,{Aj:function(){return r},Nm:function(){return a},ce:function(){return i}});var s=n(1190);let i={SINGLE:"single",MULTI:"multi",FILL:"fill",MATCH:"match"};function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Nowy quiz";return{id:(0,s.hQ)(),title:e,questions:[],createdAt:Date.now(),updatedAt:Date.now()}}function a(e){let t={id:(0,s.hQ)(),type:e,title:"Nowe pytanie",bodyHtml:"<p>Treść pytania (HTML)</p>",submitLabel:"Zatwierdź"};if(e===i.SINGLE||e===i.MULTI){let e={id:(0,s.hQ)(),kind:"text",value:"Opcja A"},n={id:(0,s.hQ)(),kind:"text",value:"Opcja B"};return{...t,options:[e,n],correctOptionIds:[e.id]}}if(e===i.FILL){let e={id:(0,s.hQ)(),label:"Pole 1"};return{...t,fill:{options:["A","B","C"],fields:[e],correctByFieldId:{[e.id]:"A"}}}}return e===i.MATCH?{...t,match:{pairs:[{left:"1",right:"jeden"},{left:"2",right:"dwa"}]}}:t}},1190:function(e,t,n){"use strict";n.d(t,{GE:function(){return o},IE:function(){return a},Wd:function(){return l},hQ:function(){return i},n0:function(){return r}});let s="laboratoryfront_quizzes_v1";function i(){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"".concat(Date.now(),"_").concat(Math.random().toString(16).slice(2))}function r(){let e=localStorage.getItem(s),t=e?function(e,t){try{return JSON.parse(e)}catch(e){return t}}(e,[]):[];return Array.isArray(t)?t:[]}function a(e){localStorage.setItem(s,JSON.stringify(e||[]))}function l(e){let t=r(),n=t.findIndex(t=>t.id===e.id),s=[...t];return -1===n?s.unshift(e):s[n]=e,a(s),s}function o(e){let t=r().filter(t=>t.id!==e);return a(t),t}},5090:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var s=n(7437),i=n(7138),r=n(2265),a=n(6463),l=n(1190),o=n(5922);function d(e){return JSON.parse(JSON.stringify(e))}function c(){let e=(0,a.useRouter)(),t=(0,a.useParams)(),n=null==t?void 0:t.id,c=(0,r.useMemo)(()=>{let e=(0,l.n0)().find(e=>e.id===n);if(!e){let e=(0,o.Aj)("Nowy quiz");return e.id=n,e}return e},[n]),[u,p]=(0,r.useState)(()=>d(c)),[m,x]=(0,r.useState)(""),f=()=>{let e={...u,updatedAt:Date.now()};(0,l.Wd)(e),p(d(e)),x("Zapisano ✅"),setTimeout(()=>x(""),1200)},h=e=>{p(t=>{let n=d(t);return n.questions=n.questions||[],n.questions.push((0,o.Nm)(e)),n.updatedAt=Date.now(),n})},j=e=>{p(t=>{let n=d(t);return n.questions=(n.questions||[]).filter(t=>t.id!==e),n.updatedAt=Date.now(),n})},N=(e,t)=>{p(n=>{let s=d(n),i=(s.questions||[]).findIndex(t=>t.id===e);return -1===i?n:(s.questions[i]={...s.questions[i],...t},s.updatedAt=Date.now(),s)})},b=(e,t,n)=>{p(s=>{let i=d(s),r=(i.questions||[]).find(t=>t.id===e);if(!(null==r?void 0:r.options))return s;let a=r.options.find(e=>e.id===t);return a?(a.value=n,i.updatedAt=Date.now(),i):s})},y=e=>{p(t=>{let n=d(t),s=(n.questions||[]).find(t=>t.id===e);if(!s)return t;s.options=s.options||[];let i={id:crypto.randomUUID(),kind:"text",value:"Nowa opcja"};return s.options.push(i),s.correctOptionIds=s.correctOptionIds||[],0===s.correctOptionIds.length&&(s.correctOptionIds=[i.id]),n.updatedAt=Date.now(),n})},g=(e,t)=>{p(n=>{let s=d(n),i=(s.questions||[]).find(t=>t.id===e);return(null==i?void 0:i.options)?(i.options=i.options.filter(e=>e.id!==t),i.correctOptionIds=(i.correctOptionIds||[]).filter(e=>e!==t),0===(i.correctOptionIds||[]).length&&i.options.length>0&&(i.correctOptionIds=[i.options[0].id]),s.updatedAt=Date.now(),s):n})},v=(e,t,n)=>{p(s=>{let i=d(s),r=(i.questions||[]).find(t=>t.id===e);if(!r)return s;let a=new Set(r.correctOptionIds||[]);return n?(a.has(t)?a.delete(t):a.add(t),r.correctOptionIds=Array.from(a)):r.correctOptionIds=[t],i.updatedAt=Date.now(),i})};return(0,s.jsxs)("div",{className:"max-w-3xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Edycja quizu"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(i.default,{className:"underline",href:"/quiz/manage",children:"← Wr\xf3ć do panelu"}),(0,s.jsx)(i.default,{className:"underline",href:"/quiz",children:"Lista quiz\xf3w"})]})]}),(0,s.jsxs)("div",{className:"mt-4 border rounded p-4 flex flex-col gap-3",children:[(0,s.jsx)("label",{className:"font-semibold",children:"Tytuł"}),(0,s.jsx)("input",{className:"border p-2",value:u.title||"",onChange:e=>p(t=>({...t,title:e.target.value})),placeholder:"Np. Quiz z tematu 4"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:f,className:"border px-3 py-2 bg-gray-900 text-white",children:"Zapisz"}),(0,s.jsx)("button",{onClick:()=>{(0,l.GE)(u.id),e.push("/quiz/manage")},className:"border px-3 py-2",children:"Usuń quiz"}),m&&(0,s.jsx)("span",{className:"text-green-500 self-center",children:m})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex flex-col gap-3",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Pytania"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{className:"border px-3 py-2",onClick:()=>h(o.ce.SINGLE),children:"+ Single"}),(0,s.jsx)("button",{className:"border px-3 py-2",onClick:()=>h(o.ce.MULTI),children:"+ Multi"}),(0,s.jsx)("button",{className:"border px-3 py-2",onClick:()=>h(o.ce.FILL),children:"+ Fill"}),(0,s.jsx)("button",{className:"border px-3 py-2",onClick:()=>h(o.ce.MATCH),children:"+ Match"})]}),0===(u.questions||[]).length&&(0,s.jsx)("p",{children:"Brak pytań. Dodaj pierwsze."}),(u.questions||[]).map((e,t)=>{let n=e.type===o.ce.MULTI,i=e.type===o.ce.SINGLE||e.type===o.ce.MULTI;return(0,s.jsxs)("div",{className:"border rounded p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"font-semibold",children:[t+1,". ",e.type]}),(0,s.jsx)("button",{className:"border px-3 py-1",onClick:()=>j(e.id),children:"Usuń pytanie"})]}),(0,s.jsxs)("div",{className:"mt-3 flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm",children:"Tytuł pytania"}),(0,s.jsx)("input",{className:"border p-2",value:e.title||"",onChange:t=>N(e.id,{title:t.target.value})}),(0,s.jsx)("label",{className:"text-sm",children:"Treść (HTML)"}),(0,s.jsx)("textarea",{className:"border p-2 min-h-[90px]",value:e.bodyHtml||"",onChange:t=>N(e.id,{bodyHtml:t.target.value})}),(0,s.jsx)("label",{className:"text-sm",children:"Tekst przycisku"}),(0,s.jsx)("input",{className:"border p-2",value:e.submitLabel||"",onChange:t=>N(e.id,{submitLabel:t.target.value})})]}),i&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"font-semibold mb-2",children:"Opcje"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(e.options||[]).map(t=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:n?"checkbox":"radio",checked:(e.correctOptionIds||[]).includes(t.id),onChange:()=>v(e.id,t.id,n)}),(0,s.jsx)("input",{className:"border p-2 flex-1",value:t.value||"",onChange:n=>b(e.id,t.id,n.target.value)}),(0,s.jsx)("button",{className:"border px-3 py-2",onClick:()=>g(e.id,t.id),children:"Usuń"})]},t.id)),(0,s.jsx)("button",{className:"border px-3 py-2 w-fit",onClick:()=>y(e.id),children:"+ Dodaj opcję"})]})]}),e.type===o.ce.FILL&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-300",children:"(FILL możesz rozbudować p\xf3źniej — ważne, że struktura się zapisuje.)"})}),e.type===o.ce.MATCH&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-300",children:"(MATCH możesz rozbudować p\xf3źniej — ważne, że panel działa.)"})})]},e.id)}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{onClick:f,className:"border px-3 py-2 bg-gray-900 text-white",children:"Zapisz wszystko"})})]})]})}},7138:function(e,t,n){"use strict";n.d(t,{default:function(){return i.a}});var s=n(231),i=n.n(s)},6463:function(e,t,n){"use strict";var s=n(1169);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[231,971,23,744],function(){return e(e.s=2701)}),_N_E=e.O()}]);