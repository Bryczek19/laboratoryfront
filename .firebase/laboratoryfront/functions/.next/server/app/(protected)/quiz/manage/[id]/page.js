(()=>{var e={};e.id=851,e.ids=[851],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5060:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(3570),r(2844),r(7242),r(1888);var s=r(3191),i=r(8716),a=r(7922),n=r.n(a),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["(protected)",{children:["quiz",{children:["manage",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3570)),"C:\\Users\\Konra\\laboratoryfront\\app\\(protected)\\quiz\\manage\\[id]\\page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2844)),"C:\\Users\\Konra\\laboratoryfront\\app\\(protected)\\layout.js"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,7242)),"C:\\Users\\Konra\\laboratoryfront\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.bind(r,1888)),"C:\\Users\\Konra\\laboratoryfront\\app\\not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\Konra\\laboratoryfront\\app\\(protected)\\quiz\\manage\\[id]\\page.js"],u="/(protected)/quiz/manage/[id]/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(protected)/quiz/manage/[id]/page",pathname:"/quiz/manage/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7980:(e,t,r)=>{Promise.resolve().then(r.bind(r,9996))},7335:(e,t,r)=>{"use strict";r.d(t,{Aj:()=>a,Nm:()=>n,ce:()=>i});var s=r(7168);let i={SINGLE:"single",MULTI:"multi",FILL:"fill",MATCH:"match"};function a(e="Nowy quiz"){return{id:(0,s.hQ)(),title:e,questions:[],createdAt:Date.now(),updatedAt:Date.now()}}function n(e){let t={id:(0,s.hQ)(),type:e,title:"Nowe pytanie",bodyHtml:"<p>Treść pytania (HTML)</p>",submitLabel:"Zatwierdź"};if(e===i.SINGLE||e===i.MULTI){let e={id:(0,s.hQ)(),kind:"text",value:"Opcja A"},r={id:(0,s.hQ)(),kind:"text",value:"Opcja B"};return{...t,options:[e,r],correctOptionIds:[e.id]}}if(e===i.FILL){let e={id:(0,s.hQ)(),label:"Pole 1"};return{...t,fill:{options:["A","B","C"],fields:[e],correctByFieldId:{[e.id]:"A"}}}}return e===i.MATCH?{...t,match:{pairs:[{left:"1",right:"jeden"},{left:"2",right:"dwa"}]}}:t}},7168:(e,t,r)=>{"use strict";function s(){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}_${Math.random().toString(16).slice(2)}`}function i(){return[]}function a(e){}function n(e){let t=[],r=t.findIndex(t=>t.id===e.id),s=[...t];return -1===r?s.unshift(e):s[r]=e,s}function o(e){return[].filter(t=>t.id!==e)}r.d(t,{GE:()=>o,IE:()=>a,Wd:()=>n,hQ:()=>s,n0:()=>i})},9996:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(326),i=r(434),a=r(7577),n=r(5047),o=r(7168),l=r(7335);function d(e){return JSON.parse(JSON.stringify(e))}function c(){let e=(0,n.useRouter)(),t=(0,n.useParams)(),r=t?.id,c=(0,a.useMemo)(()=>{let e=(0,o.n0)().find(e=>e.id===r);if(!e){let e=(0,l.Aj)("Nowy quiz");return e.id=r,e}return e},[r]),[u,p]=(0,a.useState)(()=>d(c)),[x,m]=(0,a.useState)(""),h=()=>{let e={...u,updatedAt:Date.now()};(0,o.Wd)(e),p(d(e)),m("Zapisano ✅"),setTimeout(()=>m(""),1200)},f=e=>{p(t=>{let r=d(t);return r.questions=r.questions||[],r.questions.push((0,l.Nm)(e)),r.updatedAt=Date.now(),r})},j=e=>{p(t=>{let r=d(t);return r.questions=(r.questions||[]).filter(t=>t.id!==e),r.updatedAt=Date.now(),r})},b=(e,t)=>{p(r=>{let s=d(r),i=(s.questions||[]).findIndex(t=>t.id===e);return -1===i?r:(s.questions[i]={...s.questions[i],...t},s.updatedAt=Date.now(),s)})},g=(e,t,r)=>{p(s=>{let i=d(s),a=(i.questions||[]).find(t=>t.id===e);if(!a?.options)return s;let n=a.options.find(e=>e.id===t);return n?(n.value=r,i.updatedAt=Date.now(),i):s})},y=e=>{p(t=>{let r=d(t),s=(r.questions||[]).find(t=>t.id===e);if(!s)return t;s.options=s.options||[];let i={id:crypto.randomUUID(),kind:"text",value:"Nowa opcja"};return s.options.push(i),s.correctOptionIds=s.correctOptionIds||[],0===s.correctOptionIds.length&&(s.correctOptionIds=[i.id]),r.updatedAt=Date.now(),r})},q=(e,t)=>{p(r=>{let s=d(r),i=(s.questions||[]).find(t=>t.id===e);return i?.options?(i.options=i.options.filter(e=>e.id!==t),i.correctOptionIds=(i.correctOptionIds||[]).filter(e=>e!==t),0===(i.correctOptionIds||[]).length&&i.options.length>0&&(i.correctOptionIds=[i.options[0].id]),s.updatedAt=Date.now(),s):r})},N=(e,t,r)=>{p(s=>{let i=d(s),a=(i.questions||[]).find(t=>t.id===e);if(!a)return s;let n=new Set(a.correctOptionIds||[]);return r?(n.has(t)?n.delete(t):n.add(t),a.correctOptionIds=Array.from(n)):a.correctOptionIds=[t],i.updatedAt=Date.now(),i})};return(0,s.jsxs)("div",{className:"max-w-3xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Edycja quizu"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx(i.default,{className:"underline",href:"/quiz/manage",children:"← Wr\xf3ć do panelu"}),s.jsx(i.default,{className:"underline",href:"/quiz",children:"Lista quiz\xf3w"})]})]}),(0,s.jsxs)("div",{className:"mt-4 border rounded p-4 flex flex-col gap-3",children:[s.jsx("label",{className:"font-semibold",children:"Tytuł"}),s.jsx("input",{className:"border p-2",value:u.title||"",onChange:e=>p(t=>({...t,title:e.target.value})),placeholder:"Np. Quiz z tematu 4"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:h,className:"border px-3 py-2 bg-gray-900 text-white",children:"Zapisz"}),s.jsx("button",{onClick:()=>{(0,o.GE)(u.id),e.push("/quiz/manage")},className:"border px-3 py-2",children:"Usuń quiz"}),x&&s.jsx("span",{className:"text-green-500 self-center",children:x})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex flex-col gap-3",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Pytania"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{className:"border px-3 py-2",onClick:()=>f(l.ce.SINGLE),children:"+ Single"}),s.jsx("button",{className:"border px-3 py-2",onClick:()=>f(l.ce.MULTI),children:"+ Multi"}),s.jsx("button",{className:"border px-3 py-2",onClick:()=>f(l.ce.FILL),children:"+ Fill"}),s.jsx("button",{className:"border px-3 py-2",onClick:()=>f(l.ce.MATCH),children:"+ Match"})]}),0===(u.questions||[]).length&&s.jsx("p",{children:"Brak pytań. Dodaj pierwsze."}),(u.questions||[]).map((e,t)=>{let r=e.type===l.ce.MULTI,i=e.type===l.ce.SINGLE||e.type===l.ce.MULTI;return(0,s.jsxs)("div",{className:"border rounded p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"font-semibold",children:[t+1,". ",e.type]}),s.jsx("button",{className:"border px-3 py-1",onClick:()=>j(e.id),children:"Usuń pytanie"})]}),(0,s.jsxs)("div",{className:"mt-3 flex flex-col gap-2",children:[s.jsx("label",{className:"text-sm",children:"Tytuł pytania"}),s.jsx("input",{className:"border p-2",value:e.title||"",onChange:t=>b(e.id,{title:t.target.value})}),s.jsx("label",{className:"text-sm",children:"Treść (HTML)"}),s.jsx("textarea",{className:"border p-2 min-h-[90px]",value:e.bodyHtml||"",onChange:t=>b(e.id,{bodyHtml:t.target.value})}),s.jsx("label",{className:"text-sm",children:"Tekst przycisku"}),s.jsx("input",{className:"border p-2",value:e.submitLabel||"",onChange:t=>b(e.id,{submitLabel:t.target.value})})]}),i&&(0,s.jsxs)("div",{className:"mt-4",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Opcje"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(e.options||[]).map(t=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:r?"checkbox":"radio",checked:(e.correctOptionIds||[]).includes(t.id),onChange:()=>N(e.id,t.id,r)}),s.jsx("input",{className:"border p-2 flex-1",value:t.value||"",onChange:r=>g(e.id,t.id,r.target.value)}),s.jsx("button",{className:"border px-3 py-2",onClick:()=>q(e.id,t.id),children:"Usuń"})]},t.id)),s.jsx("button",{className:"border px-3 py-2 w-fit",onClick:()=>y(e.id),children:"+ Dodaj opcję"})]})]}),e.type===l.ce.FILL&&s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"text-sm text-gray-300",children:"(FILL możesz rozbudować p\xf3źniej — ważne, że struktura się zapisuje.)"})}),e.type===l.ce.MATCH&&s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"text-sm text-gray-300",children:"(MATCH możesz rozbudować p\xf3źniej — ważne, że panel działa.)"})})]},e.id)}),s.jsx("div",{className:"mt-4",children:s.jsx("button",{onClick:h,className:"border px-3 py-2 bg-gray-900 text-white",children:"Zapisz wszystko"})})]})]})}},3570:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});var s=r(8570);let i=(0,s.createProxy)(String.raw`C:\Users\Konra\laboratoryfront\app\(protected)\quiz\manage\[id]\page.js`),{__esModule:a,$$typeof:n}=i;i.default;let o=(0,s.createProxy)(String.raw`C:\Users\Konra\laboratoryfront\app\(protected)\quiz\manage\[id]\page.js#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,673,963],()=>r(5060));module.exports=s})();